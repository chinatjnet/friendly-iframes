<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Friendly iFrame - Inject iframe with content</title>
    <meta name="description" content="">
  </head>

  <body>
    <h1>Inject iframe with content</h1>

    <ol>
      <li>Iframe exists on the page with src="javascript:false"</li>
      <li>Onload of the iframe fires instantly, because of the src</li>
      <li>Onload of iframe doc is set to fetch ad URL and replace iframe content</li>
      <li>Other content exists on the main page</li>
    </ol>

    <p>Blocks the main page's onload event with inner iframe content</p>

    <iframe src="javascript:false"></iframe>

    <script>
        (function(d){
        // var iframe = d.body.appendChild(d.createElement('iframe')),
        var iframe = d.body.getElementsByTagName('iframe')[0],
            doc = iframe.contentWindow.document;

        iframe.style.cssText = "position:absolute;width:200px;height:100px;left:0px;";

        // This math.random stuff is only for the purpose of this test page
        doc.open().write('<body onload="' +

          'var d = document;' +
          'd.getElementsByTagName(\'head\')[0].' +
          'appendChild(d.createElement(\'script\')).src' +
          '=\'https:\/\/ajax.googleapis.com\/ajax\/libs\/jquery\/1.12.0\/jquery.min.js\';' +
          'd.getElementsByTagName(\'head\')[0].' +
          'appendChild(d.createElement(\'script\')).src' +
          '=\'http:\/\/nathancharles.github.io\/friendly-iframes\/adLoaderReplace.js\';"' +
          ' data-ad-url="http://nathancharles.github.io/friendly-iframes/demos/injectiframe-injectscript-injectiframe-content.html">');

        doc.close(); //iframe onload event happens

      })(document);
    </script>

    <script src="http://1.cuzillion.com/bin/resource.cgi?type=js&sleep=2&n=1&t=3529962513130.158"/>

  </body>
</html>
